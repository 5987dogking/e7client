function _defineProperties(l,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(l,a.key,a)}}function _createClass(l,n,e){return n&&_defineProperties(l.prototype,n),e&&_defineProperties(l,e),l}function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{nX7e:function(l,n,e){"use strict";e.r(n);var a,u=e("8Y7J"),t=function l(){_classCallCheck(this,l)},o=e("pMnS"),i=e("s7LF"),r=e("dJrM"),c=e("HsOI"),b=e("Xd0L"),d=e("IP0z"),s=e("/HVE"),f=e("omvX"),h=e("ZwOa"),p=e("oapL"),m=e("bujt"),g=e("Fwaw"),A=e("5GAg"),_=e("Mr+X"),y=e("Gi4r"),v=e("SVse"),C=function(){function l(n,e,a){_classCallCheck(this,l),this.liffService=n,this.userService=e,this.snackBar=a,this.showCount=0,this.pattern_StudentId=/^5\d{7}$/,this.pattern_Phone=/^09\d{8}$/}return _createClass(l,[{key:"ngOnInit",value:function(){this.JOBinit(),this.getUserDataAndInit()}},{key:"getUserDataAndInit",value:function(){this.userService.userDataGet()}},{key:"showVConsole",value:function(){this.showCount++,5===this.showCount&&new VConsole,this.showCount>7&&this.getUserDataAndInit()}},{key:"JOBinit",value:function(){var l=this;JOB.Init(),JOB.SetImageCallback((function(n){console.log("SetImageCallback",n),1===n.length&&l.pattern_StudentId.test(n[0].Value)?l.userService.schoolUserProfile.studentId=n[0].Value:l.snackBar.open("\u89e3\u6790\u5931\u6557\u8acb\u91cd\u65b0\u62cd\u651d\u6216\u662f\u9078\u53d6\u7167\u7247\uff01","",{duration:2e3})}))}},{key:"imgSelect",value:function(l){var n=l.target.files;if(n&&n.length>0){var e=new FileReader;e.onload=function(l){JOB.DecodeImage(e.result)},e.readAsDataURL(n[0])}}}]),l}(),k=e("roDk"),S=e("mrSG"),I=e("Xr7G"),w=e("dFDH"),q=e("IheW"),F=((a=function(){function l(n,e,a,u){_classCallCheck(this,l),this.db=n,this.liffService=e,this.snackBar=a,this.http=u}return _createClass(l,[{key:"userDataGet",value:function(){var l=this,n=this.liffService.profile,e=this.liffService.channelID;return console.log("/linebot/".concat(e,"/users"),e,n),this.userDoc=this.db.collection("/linebot/".concat(e,"/users")).doc(n.userId),new Promise((function(e,a){l.userDoc.get().subscribe((function(a){if(!1===a.exists)l.schoolUserProfile=Object.assign({},n,{phone:"",studentId:"",name:n.displayName}),l.userDoc.set(l.schoolUserProfile),e(l.schoolUserProfile);else{var u=a.data();l.schoolUserProfile=u,e(l.schoolUserProfile)}}))}))}},{key:"notifyDataGet",value:function(){return S.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n="https://us-central1-review-clean02.cloudfunctions.net/app/notify/"+this.liffService.channelID,l.next=3,this.http.get(n).toPromise();case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}}),l,this)})))}},{key:"userDataSave",value:function(){var l=this,n=this.liffService.channelID,e=this.schoolUserProfile.studentId;Number(e)<50801001||Number(e)>50812057?this.snackBar.open("\u5b78\u865f\u8d85\u51fa\u7bc4\u570d(50801001~50812057)","",{duration:2e3}):this.db.collection("/linebot/".concat(n,"/users"),(function(l){return l.where("studentId","==",e)})).get().subscribe((function(n){n.docs.length>1?l.snackBar.open("\u8a72\u5b78\u865f\u5df2\u7d93\u5b58\u5728!","",{duration:2e3}):l.userDoc.set(l.schoolUserProfile).then((function(n){l.snackBar.open("\u66f4\u65b0\u6210\u529f","",{duration:2e3})})).catch((function(l){}))}))}}]),l}()).ngInjectableDef=u.Mb({factory:function(){return new a(u.Qb(I.a),u.Qb(k.a),u.Qb(w.b),u.Qb(q.c))},token:a,providedIn:"root"}),a),P=u.ob({encapsulation:0,styles:[["mat-form-field[_ngcontent-%COMP%]{width:100%}"]],data:{}});function D(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,81,"div",[],null,null,null,null,null)),(l()(),u.qb(1,0,null,null,80,"form",[["name","form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var a=!0;return"submit"===n&&(a=!1!==u.Ab(l,3).onSubmit(e)&&a),"reset"===n&&(a=!1!==u.Ab(l,3).onReset()&&a),a}),null,null)),u.pb(2,16384,null,0,i.q,[],null,null),u.pb(3,4210688,[["f_input",4]],0,i.k,[[8,null],[8,null]],null,null),u.Fb(2048,null,i.b,null,[i.k]),u.pb(5,16384,null,0,i.j,[[4,i.b]],null,null),(l()(),u.qb(6,0,null,null,20,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,r.b,r.a)),u.pb(7,7520256,null,9,c.b,[u.k,u.h,[2,b.f],[2,d.b],[2,c.a],s.a,u.y,[2,f.a]],null,null),u.Gb(603979776,1,{_controlNonStatic:0}),u.Gb(335544320,2,{_controlStatic:0}),u.Gb(603979776,3,{_labelChildNonStatic:0}),u.Gb(335544320,4,{_labelChildStatic:0}),u.Gb(603979776,5,{_placeholderChild:0}),u.Gb(603979776,6,{_errorChildren:1}),u.Gb(603979776,7,{_hintChildren:1}),u.Gb(603979776,8,{_prefixChildren:1}),u.Gb(603979776,9,{_suffixChildren:1}),(l()(),u.qb(17,0,null,1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["name","name"],["placeholder","\u59d3\u540d"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(l,n,e){var a=!0,t=l.component;return"input"===n&&(a=!1!==u.Ab(l,18)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==u.Ab(l,18).onTouched()&&a),"compositionstart"===n&&(a=!1!==u.Ab(l,18)._compositionStart()&&a),"compositionend"===n&&(a=!1!==u.Ab(l,18)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==u.Ab(l,25)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==u.Ab(l,25)._focusChanged(!0)&&a),"input"===n&&(a=!1!==u.Ab(l,25)._onInput()&&a),"ngModelChange"===n&&(a=!1!==(t.userService.schoolUserProfile.name=e)&&a),a}),null,null)),u.pb(18,16384,null,0,i.c,[u.D,u.k,[2,i.a]],null,null),u.pb(19,16384,null,0,i.n,[],{required:[0,"required"]},null),u.Fb(1024,null,i.f,(function(l){return[l]}),[i.n]),u.Fb(1024,null,i.g,(function(l){return[l]}),[i.c]),u.pb(22,671744,null,0,i.l,[[2,i.b],[6,i.f],[8,null],[6,i.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,i.h,null,[i.l]),u.pb(24,16384,null,0,i.i,[[4,i.h]],null,null),u.pb(25,999424,null,0,h.a,[u.k,s.a,[6,i.h],[2,i.k],[2,i.d],b.b,[8,null],p.a,u.y],{placeholder:[0,"placeholder"],required:[1,"required"]},null),u.Fb(2048,[[1,4],[2,4]],c.c,null,[h.a]),(l()(),u.qb(27,0,null,null,21,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,r.b,r.a)),u.pb(28,7520256,null,9,c.b,[u.k,u.h,[2,b.f],[2,d.b],[2,c.a],s.a,u.y,[2,f.a]],null,null),u.Gb(603979776,10,{_controlNonStatic:0}),u.Gb(335544320,11,{_controlStatic:0}),u.Gb(603979776,12,{_labelChildNonStatic:0}),u.Gb(335544320,13,{_labelChildStatic:0}),u.Gb(603979776,14,{_placeholderChild:0}),u.Gb(603979776,15,{_errorChildren:1}),u.Gb(603979776,16,{_hintChildren:1}),u.Gb(603979776,17,{_prefixChildren:1}),u.Gb(603979776,18,{_suffixChildren:1}),(l()(),u.qb(38,0,null,1,10,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["name","phone"],["placeholder","\u96fb\u8a71"],["required",""]],[[1,"required",0],[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(l,n,e){var a=!0,t=l.component;return"input"===n&&(a=!1!==u.Ab(l,39)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==u.Ab(l,39).onTouched()&&a),"compositionstart"===n&&(a=!1!==u.Ab(l,39)._compositionStart()&&a),"compositionend"===n&&(a=!1!==u.Ab(l,39)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==u.Ab(l,47)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==u.Ab(l,47)._focusChanged(!0)&&a),"input"===n&&(a=!1!==u.Ab(l,47)._onInput()&&a),"ngModelChange"===n&&(a=!1!==(t.userService.schoolUserProfile.phone=e)&&a),a}),null,null)),u.pb(39,16384,null,0,i.c,[u.D,u.k,[2,i.a]],null,null),u.pb(40,16384,null,0,i.n,[],{required:[0,"required"]},null),u.pb(41,540672,null,0,i.m,[],{pattern:[0,"pattern"]},null),u.Fb(1024,null,i.f,(function(l,n){return[l,n]}),[i.n,i.m]),u.Fb(1024,null,i.g,(function(l){return[l]}),[i.c]),u.pb(44,671744,null,0,i.l,[[2,i.b],[6,i.f],[8,null],[6,i.g]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,i.h,null,[i.l]),u.pb(46,16384,null,0,i.i,[[4,i.h]],null,null),u.pb(47,999424,null,0,h.a,[u.k,s.a,[6,i.h],[2,i.k],[2,i.d],b.b,[8,null],p.a,u.y],{placeholder:[0,"placeholder"],required:[1,"required"]},null),u.Fb(2048,[[10,4],[11,4]],c.c,null,[h.a]),(l()(),u.qb(49,0,null,null,5,"button",[["class","right"],["color","primary"],["mat-raised-button",""],["required",""],["style","z-index: 5;margin-bottom: -30px;"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,e){var a=!0;return"click"===n&&(a=!1!==u.Ab(l.parent,7).click()&&a),a}),m.d,m.b)),u.pb(50,180224,null,0,g.b,[u.k,A.e,[2,f.a]],{color:[0,"color"]},null),(l()(),u.qb(51,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,_.b,_.a)),u.pb(52,9158656,null,0,y.b,[u.k,y.d,[8,null],[2,y.a],[2,u.l]],null,null),(l()(),u.Ib(-1,0,["camera_alt"])),(l()(),u.Ib(-1,0,["\xa0\u6383\u63cf\u5b78\u751f\u8b49 "])),(l()(),u.qb(55,0,null,null,18,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,r.b,r.a)),u.pb(56,7520256,null,9,c.b,[u.k,u.h,[2,b.f],[2,d.b],[2,c.a],s.a,u.y,[2,f.a]],null,null),u.Gb(603979776,19,{_controlNonStatic:0}),u.Gb(335544320,20,{_controlStatic:0}),u.Gb(603979776,21,{_labelChildNonStatic:0}),u.Gb(335544320,22,{_labelChildStatic:0}),u.Gb(603979776,23,{_placeholderChild:0}),u.Gb(603979776,24,{_errorChildren:1}),u.Gb(603979776,25,{_hintChildren:1}),u.Gb(603979776,26,{_prefixChildren:1}),u.Gb(603979776,27,{_suffixChildren:1}),(l()(),u.qb(66,0,null,1,7,"input",[["class","mat-input-element mat-form-field-autofill-control"],["disabled",""],["matInput",""],["name","studentId"],["placeholder","\u5b78\u865f(\u8acb\u9ede\u64ca\u6309\u9215)"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],(function(l,n,e){var a=!0,t=l.component;return"input"===n&&(a=!1!==u.Ab(l,67)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==u.Ab(l,67).onTouched()&&a),"compositionstart"===n&&(a=!1!==u.Ab(l,67)._compositionStart()&&a),"compositionend"===n&&(a=!1!==u.Ab(l,67)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==u.Ab(l,72)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==u.Ab(l,72)._focusChanged(!0)&&a),"input"===n&&(a=!1!==u.Ab(l,72)._onInput()&&a),"ngModelChange"===n&&(a=!1!==(t.userService.schoolUserProfile.studentId=e)&&a),a}),null,null)),u.pb(67,16384,null,0,i.c,[u.D,u.k,[2,i.a]],null,null),u.Fb(1024,null,i.g,(function(l){return[l]}),[i.c]),u.pb(69,671744,null,0,i.l,[[2,i.b],[8,null],[8,null],[6,i.g]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,i.h,null,[i.l]),u.pb(71,16384,null,0,i.i,[[4,i.h]],null,null),u.pb(72,999424,null,0,h.a,[u.k,s.a,[6,i.h],[2,i.k],[2,i.d],b.b,[8,null],p.a,u.y],{disabled:[0,"disabled"],placeholder:[1,"placeholder"]},null),u.Fb(2048,[[19,4],[20,4]],c.c,null,[h.a]),(l()(),u.qb(74,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.qb(75,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.qb(76,0,null,null,5,"button",[["class","btn-block mtop"],["color","primary"],["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,e){var a=!0;return"click"===n&&(a=!1!==l.component.userService.userDataSave()&&a),a}),m.d,m.b)),u.pb(77,180224,null,0,g.b,[u.k,A.e,[2,f.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(l()(),u.Ib(-1,0,[" \u5b58\u6a94\xa0"])),(l()(),u.qb(79,0,null,0,2,"mat-icon",[["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,_.b,_.a)),u.pb(80,9158656,null,0,y.b,[u.k,y.d,[8,null],[2,y.a],[2,u.l]],null,null),(l()(),u.Ib(-1,0,["save"]))],(function(l,n){var e=n.component;l(n,19,0,""),l(n,22,0,"name",e.userService.schoolUserProfile.name),l(n,25,0,"\u59d3\u540d",""),l(n,40,0,""),l(n,41,0,e.pattern_Phone),l(n,44,0,"phone",e.userService.schoolUserProfile.phone),l(n,47,0,"\u96fb\u8a71",""),l(n,50,0,"primary"),l(n,52,0),l(n,69,0,"studentId","",e.userService.schoolUserProfile.studentId),l(n,72,0,"","\u5b78\u865f(\u8acb\u9ede\u64ca\u6309\u9215)"),l(n,77,0,!u.Ab(n,3).valid,"primary"),l(n,80,0)}),(function(l,n){l(n,1,0,u.Ab(n,5).ngClassUntouched,u.Ab(n,5).ngClassTouched,u.Ab(n,5).ngClassPristine,u.Ab(n,5).ngClassDirty,u.Ab(n,5).ngClassValid,u.Ab(n,5).ngClassInvalid,u.Ab(n,5).ngClassPending),l(n,6,1,["standard"==u.Ab(n,7).appearance,"fill"==u.Ab(n,7).appearance,"outline"==u.Ab(n,7).appearance,"legacy"==u.Ab(n,7).appearance,u.Ab(n,7)._control.errorState,u.Ab(n,7)._canLabelFloat,u.Ab(n,7)._shouldLabelFloat(),u.Ab(n,7)._hasFloatingLabel(),u.Ab(n,7)._hideControlPlaceholder(),u.Ab(n,7)._control.disabled,u.Ab(n,7)._control.autofilled,u.Ab(n,7)._control.focused,"accent"==u.Ab(n,7).color,"warn"==u.Ab(n,7).color,u.Ab(n,7)._shouldForward("untouched"),u.Ab(n,7)._shouldForward("touched"),u.Ab(n,7)._shouldForward("pristine"),u.Ab(n,7)._shouldForward("dirty"),u.Ab(n,7)._shouldForward("valid"),u.Ab(n,7)._shouldForward("invalid"),u.Ab(n,7)._shouldForward("pending"),!u.Ab(n,7)._animationsEnabled]),l(n,17,1,[u.Ab(n,19).required?"":null,u.Ab(n,24).ngClassUntouched,u.Ab(n,24).ngClassTouched,u.Ab(n,24).ngClassPristine,u.Ab(n,24).ngClassDirty,u.Ab(n,24).ngClassValid,u.Ab(n,24).ngClassInvalid,u.Ab(n,24).ngClassPending,u.Ab(n,25)._isServer,u.Ab(n,25).id,u.Ab(n,25).placeholder,u.Ab(n,25).disabled,u.Ab(n,25).required,u.Ab(n,25).readonly&&!u.Ab(n,25)._isNativeSelect||null,u.Ab(n,25)._ariaDescribedby||null,u.Ab(n,25).errorState,u.Ab(n,25).required.toString()]),l(n,27,1,["standard"==u.Ab(n,28).appearance,"fill"==u.Ab(n,28).appearance,"outline"==u.Ab(n,28).appearance,"legacy"==u.Ab(n,28).appearance,u.Ab(n,28)._control.errorState,u.Ab(n,28)._canLabelFloat,u.Ab(n,28)._shouldLabelFloat(),u.Ab(n,28)._hasFloatingLabel(),u.Ab(n,28)._hideControlPlaceholder(),u.Ab(n,28)._control.disabled,u.Ab(n,28)._control.autofilled,u.Ab(n,28)._control.focused,"accent"==u.Ab(n,28).color,"warn"==u.Ab(n,28).color,u.Ab(n,28)._shouldForward("untouched"),u.Ab(n,28)._shouldForward("touched"),u.Ab(n,28)._shouldForward("pristine"),u.Ab(n,28)._shouldForward("dirty"),u.Ab(n,28)._shouldForward("valid"),u.Ab(n,28)._shouldForward("invalid"),u.Ab(n,28)._shouldForward("pending"),!u.Ab(n,28)._animationsEnabled]),l(n,38,1,[u.Ab(n,40).required?"":null,u.Ab(n,41).pattern?u.Ab(n,41).pattern:null,u.Ab(n,46).ngClassUntouched,u.Ab(n,46).ngClassTouched,u.Ab(n,46).ngClassPristine,u.Ab(n,46).ngClassDirty,u.Ab(n,46).ngClassValid,u.Ab(n,46).ngClassInvalid,u.Ab(n,46).ngClassPending,u.Ab(n,47)._isServer,u.Ab(n,47).id,u.Ab(n,47).placeholder,u.Ab(n,47).disabled,u.Ab(n,47).required,u.Ab(n,47).readonly&&!u.Ab(n,47)._isNativeSelect||null,u.Ab(n,47)._ariaDescribedby||null,u.Ab(n,47).errorState,u.Ab(n,47).required.toString()]),l(n,49,0,u.Ab(n,50).disabled||null,"NoopAnimations"===u.Ab(n,50)._animationMode),l(n,51,0,u.Ab(n,52).inline,"primary"!==u.Ab(n,52).color&&"accent"!==u.Ab(n,52).color&&"warn"!==u.Ab(n,52).color),l(n,55,1,["standard"==u.Ab(n,56).appearance,"fill"==u.Ab(n,56).appearance,"outline"==u.Ab(n,56).appearance,"legacy"==u.Ab(n,56).appearance,u.Ab(n,56)._control.errorState,u.Ab(n,56)._canLabelFloat,u.Ab(n,56)._shouldLabelFloat(),u.Ab(n,56)._hasFloatingLabel(),u.Ab(n,56)._hideControlPlaceholder(),u.Ab(n,56)._control.disabled,u.Ab(n,56)._control.autofilled,u.Ab(n,56)._control.focused,"accent"==u.Ab(n,56).color,"warn"==u.Ab(n,56).color,u.Ab(n,56)._shouldForward("untouched"),u.Ab(n,56)._shouldForward("touched"),u.Ab(n,56)._shouldForward("pristine"),u.Ab(n,56)._shouldForward("dirty"),u.Ab(n,56)._shouldForward("valid"),u.Ab(n,56)._shouldForward("invalid"),u.Ab(n,56)._shouldForward("pending"),!u.Ab(n,56)._animationsEnabled]),l(n,66,1,[u.Ab(n,71).ngClassUntouched,u.Ab(n,71).ngClassTouched,u.Ab(n,71).ngClassPristine,u.Ab(n,71).ngClassDirty,u.Ab(n,71).ngClassValid,u.Ab(n,71).ngClassInvalid,u.Ab(n,71).ngClassPending,u.Ab(n,72)._isServer,u.Ab(n,72).id,u.Ab(n,72).placeholder,u.Ab(n,72).disabled,u.Ab(n,72).required,u.Ab(n,72).readonly&&!u.Ab(n,72)._isNativeSelect||null,u.Ab(n,72)._ariaDescribedby||null,u.Ab(n,72).errorState,u.Ab(n,72).required.toString()]),l(n,76,0,u.Ab(n,77).disabled||null,"NoopAnimations"===u.Ab(n,77)._animationMode),l(n,79,0,u.Ab(n,80).inline,"primary"!==u.Ab(n,80).color&&"accent"!==u.Ab(n,80).color&&"warn"!==u.Ab(n,80).color)}))}function G(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,8,"div",[["class","container"]],null,null,null,null,null)),(l()(),u.qb(1,0,null,null,1,"p",[["class","blockquote"]],null,[[null,"click"]],(function(l,n,e){var a=!0;return"click"===n&&(a=!1!==l.component.showVConsole()&&a),a}),null,null)),(l()(),u.Ib(-1,null,["\u60e1\u610f\u8f38\u5165\u5047\u8cc7\u6599\u5c07\u81ea\u884c\u627f\u64d4\u6cd5\u5f8b\u8cac\u4efb\u3002"])),(l()(),u.fb(16777216,null,null,1,null,D)),u.pb(4,16384,null,0,v.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.qb(5,0,null,null,3,"div",[["id","container"]],[[8,"hidden",0]],null,null,null,null)),(l()(),u.qb(6,0,null,null,0,"canvas",[["height","240"],["id","picture"],["width","320"]],null,null,null,null,null)),(l()(),u.qb(7,0,[["file",1]],null,0,"input",[["accept","image/*"],["id","Take-Picture"],["type","file"]],null,[[null,"change"]],(function(l,n,e){var a=!0;return"change"===n&&(a=!1!==l.component.imgSelect(e)&&a),a}),null,null)),(l()(),u.qb(8,0,null,null,0,"p",[["id","textbit"]],null,null,null,null,null))],(function(l,n){l(n,4,0,void 0!==n.component.userService.schoolUserProfile)}),(function(l,n){l(n,5,0,!0)}))}var U=u.mb("app-user-data",C,(function(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,1,"app-user-data",[],null,null,null,G,P)),u.pb(1,114688,null,0,C,[k.a,F,w.b],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),x=function(){function l(n,e,a){_classCallCheck(this,l),this.userService=n,this.liffService=e,this.http=a,this.notifyLink="",this.loading=!0}return _createClass(l,[{key:"ngOnInit",value:function(){return S.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function l(){var n,e,a=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return n=new URLSearchParams(window.location.search),e=n.get("code"),console.log("userService.schoolUserProfile",this.userService.schoolUserProfile),l.next=4,this.liffService.LIFFinit();case 4:this.userService.userDataGet().then((function(l){return S.__awaiter(a,void 0,void 0,regeneratorRuntime.mark((function a(){var u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==l.access_token){a.next=12;break}if(null===e||null!==n.get("liffRedirectUri")){a.next=5;break}this.notifyToken(e),a.next=10;break;case 5:return console.log("no code"),a.next=8,this.userService.notifyDataGet();case 8:u=a.sent,console.log("notifyData",u),this.notifyLink="https://notify-bot.line.me/oauth/authorize?response_type=code&scope=notify",this.notifyLink+="&client_id=".concat(u.client_id),this.notifyLink+="&redirect_uri=".concat(location.origin),this.notifyLink+="&state=page=user/userLineNotify,channelID=".concat(this.liffService.channelID,",liffId=").concat(this.liffService.liffId),console.log("notifyLink",this.notifyLink),this.loading=!1;case 10:a.next=13;break;case 12:this.loading=!1;case 13:case"end":return a.stop()}}),a,this)})))}));case 5:case"end":return l.stop()}}),l,this)})))}},{key:"notifyToken",value:function(l){var n=this;this.http.post("https://us-central1-review-clean02.cloudfunctions.net/app/webhook/".concat(this.liffService.channelID),{action:"notifyToken",source:this.userService.schoolUserProfile,channelID:this.liffService.channelID,code:l}).subscribe((function(l){console.log("notifyToken v",l),n.userService.schoolUserProfile.access_token=l.access_token}),(function(l){console.log("notifyToken e",l)}),(function(){n.loading=!1}))}},{key:"notifyTest",value:function(l){this.http.post("https://us-central1-review-clean02.cloudfunctions.net/app/notifyTest",{action:"notifyTest",source:this.userService.schoolUserProfile,channelID:this.liffService.channelID,message:l}).subscribe((function(l){console.log("notifyToken v",l)}),(function(l){console.log("notifyToken e",l)}))}}]),l}(),L=u.ob({encapsulation:0,styles:[["mat-form-field[_ngcontent-%COMP%]{width:100%}.list-ul[_ngcontent-%COMP%]{border:1px solid #e6e6e6;height:40px;margin:0 0 30px;padding:5px}.list-ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{list-style:none;color:#767a86;padding:4px 15px}.list-ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:38px;border-radius:50%;margin-right:10px}"]],data:{}});function O(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["\u5df2\u958b\u555f"]))],null,null)}function N(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["\u672a\u958b\u555f"]))],null,null)}function M(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,10,"div",[],null,null,null,null,null)),(l()(),u.qb(1,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),u.qb(2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["\u524d\u5f80\u699c\u5b9a\u8acb\u9078\u64c7\u7b2c\u4e00\u500b \u5982\u4e0b\u7bc4\u4f8b"])),(l()(),u.qb(4,0,null,null,3,"ul",[["class","list-ul flexC"]],null,null,null,null,null)),(l()(),u.qb(5,0,null,null,2,"li",[["class","flexC"]],null,null,null,null,null)),(l()(),u.qb(6,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),u.Ib(-1,null,[" \u900f\u904e1\u5c0d1\u804a\u5929\u63a5\u6536LINE Notify\u7684\u901a\u77e5 "])),(l()(),u.qb(8,0,null,null,2,"a",[["class","btn-block"],["color","primary"],["mat-raised-button",""]],[[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,e){var a=!0;return"click"===n&&(a=!1!==u.Ab(l,9)._haltDisabledEvents(e)&&a),a}),m.c,m.a)),u.pb(9,180224,null,0,g.a,[A.e,u.k,[2,f.a]],{color:[0,"color"]},null),(l()(),u.Ib(-1,0,["\u524d\u5f80\u699c\u5b9a"]))],(function(l,n){l(n,9,0,"primary")}),(function(l,n){var e=n.component;l(n,6,0,e.userService.schoolUserProfile.pictureUrl),l(n,8,0,e.notifyLink,u.Ab(n,9).disabled?-1:u.Ab(n,9).tabIndex||0,u.Ab(n,9).disabled||null,u.Ab(n,9).disabled.toString(),"NoopAnimations"===u.Ab(n,9)._animationMode)}))}function T(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,20,"div",[],null,null,null,null,null)),(l()(),u.qb(1,0,null,null,16,"mat-form-field",[["appearance","outline"],["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,r.b,r.a)),u.pb(2,7520256,null,9,c.b,[u.k,u.h,[2,b.f],[2,d.b],[2,c.a],s.a,u.y,[2,f.a]],{appearance:[0,"appearance"]},null),u.Gb(603979776,1,{_controlNonStatic:0}),u.Gb(335544320,2,{_controlStatic:0}),u.Gb(603979776,3,{_labelChildNonStatic:0}),u.Gb(335544320,4,{_labelChildStatic:0}),u.Gb(603979776,5,{_placeholderChild:0}),u.Gb(603979776,6,{_errorChildren:1}),u.Gb(603979776,7,{_hintChildren:1}),u.Gb(603979776,8,{_prefixChildren:1}),u.Gb(603979776,9,{_suffixChildren:1}),(l()(),u.qb(12,0,null,3,2,"mat-label",[],null,null,null,null,null)),u.pb(13,16384,[[3,4],[4,4]],0,c.e,[],null,null),(l()(),u.Ib(-1,null,["\u6e2c\u8a66\u8a0a\u606f"])),(l()(),u.qb(15,0,[["msg",1]],1,2,"input",[["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","\u6e2c\u8a66\u8a0a\u606f"]],[[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"blur"],[null,"focus"],[null,"input"]],(function(l,n,e){var a=!0;return"blur"===n&&(a=!1!==u.Ab(l,16)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==u.Ab(l,16)._focusChanged(!0)&&a),"input"===n&&(a=!1!==u.Ab(l,16)._onInput()&&a),a}),null,null)),u.pb(16,999424,null,0,h.a,[u.k,s.a,[8,null],[2,i.k],[2,i.d],b.b,[8,null],p.a,u.y],{placeholder:[0,"placeholder"]},null),u.Fb(2048,[[1,4],[2,4]],c.c,null,[h.a]),(l()(),u.qb(18,0,null,null,2,"a",[["color","primary"],["mat-raised-button",""]],[[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(l,n,e){var a=!0,t=l.component;return"click"===n&&(a=!1!==u.Ab(l,19)._haltDisabledEvents(e)&&a),"click"===n&&(a=!1!==t.notifyTest(u.Ab(l,15).value)&&a),a}),m.c,m.a)),u.pb(19,180224,null,0,g.a,[A.e,u.k,[2,f.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(l()(),u.Ib(-1,0,["\u9001\u51fa"]))],(function(l,n){l(n,2,0,"outline"),l(n,16,0,"\u6e2c\u8a66\u8a0a\u606f"),l(n,19,0,""==u.Ab(n,15).value,"primary")}),(function(l,n){l(n,1,1,["standard"==u.Ab(n,2).appearance,"fill"==u.Ab(n,2).appearance,"outline"==u.Ab(n,2).appearance,"legacy"==u.Ab(n,2).appearance,u.Ab(n,2)._control.errorState,u.Ab(n,2)._canLabelFloat,u.Ab(n,2)._shouldLabelFloat(),u.Ab(n,2)._hasFloatingLabel(),u.Ab(n,2)._hideControlPlaceholder(),u.Ab(n,2)._control.disabled,u.Ab(n,2)._control.autofilled,u.Ab(n,2)._control.focused,"accent"==u.Ab(n,2).color,"warn"==u.Ab(n,2).color,u.Ab(n,2)._shouldForward("untouched"),u.Ab(n,2)._shouldForward("touched"),u.Ab(n,2)._shouldForward("pristine"),u.Ab(n,2)._shouldForward("dirty"),u.Ab(n,2)._shouldForward("valid"),u.Ab(n,2)._shouldForward("invalid"),u.Ab(n,2)._shouldForward("pending"),!u.Ab(n,2)._animationsEnabled]),l(n,15,0,u.Ab(n,16)._isServer,u.Ab(n,16).id,u.Ab(n,16).placeholder,u.Ab(n,16).disabled,u.Ab(n,16).required,u.Ab(n,16).readonly&&!u.Ab(n,16)._isNativeSelect||null,u.Ab(n,16)._ariaDescribedby||null,u.Ab(n,16).errorState,u.Ab(n,16).required.toString()),l(n,18,0,u.Ab(n,19).disabled?-1:u.Ab(n,19).tabIndex||0,u.Ab(n,19).disabled||null,u.Ab(n,19).disabled.toString(),"NoopAnimations"===u.Ab(n,19)._animationMode)}))}function j(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,11,"div",[["class","container"]],null,null,null,null,null)),(l()(),u.qb(1,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),u.qb(2,0,null,null,5,"p",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["\u901a\u77e5\u72c0\u614b\uff1a "])),(l()(),u.fb(16777216,null,null,1,null,O)),u.pb(5,16384,null,0,v.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.fb(16777216,null,null,1,null,N)),u.pb(7,16384,null,0,v.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.fb(16777216,null,null,1,null,M)),u.pb(9,16384,null,0,v.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.fb(16777216,null,null,1,null,T)),u.pb(11,16384,null,0,v.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,5,0,e.userService.schoolUserProfile.access_token),l(n,7,0,!e.userService.schoolUserProfile.access_token),l(n,9,0,!e.userService.schoolUserProfile.access_token),l(n,11,0,e.userService.schoolUserProfile.access_token&&!e.loading)}),null)}function B(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,2,"div",[["class","container"]],null,null,null,null,null)),(l()(),u.qb(1,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),u.Ib(-1,null,["\u8f09\u5165\u4e2d..."]))],null,null)}function K(l){return u.Kb(0,[(l()(),u.fb(16777216,null,null,1,null,j)),u.pb(1,16384,null,0,v.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null),(l()(),u.fb(16777216,null,null,1,null,B)),u.pb(3,16384,null,0,v.m,[u.O,u.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,1,0,void 0!==e.userService.schoolUserProfile&&!e.loading),l(n,3,0,void 0===e.userService.schoolUserProfile&&e.loading)}),null)}var E=u.mb("app-user-line-notify",x,(function(l){return u.Kb(0,[(l()(),u.qb(0,0,null,null,1,"app-user-line-notify",[],null,null,null,K,L)),u.pb(1,114688,null,0,x,[F,k.a,q.c],null,null)],(function(l,n){l(n,1,0)}),null)}),{},{},[]),J=e("t68o"),R=e("xYTU"),V=e("POq0"),X=e("QQfA"),Q=e("s6ns"),z=e("gavF"),H=e("JjoW"),W=e("qJ5m"),Z=e("iInd"),Y=function l(){_classCallCheck(this,l)},$=e("cUpR"),ll=e("BzsH"),nl=e("igqZ"),el=e("5Bek"),al=e("zMNK"),ul=e("c9fC"),tl=e("hOhj"),ol=e("BV1i"),il=e("02hT"),rl=e("Q+lL"),cl=e("kNGD"),bl=e("rWV4"),dl=e("qJ50"),sl=e("elxJ"),fl=e("JrGH"),hl=e("dvZr");e.d(n,"UserModuleNgFactory",(function(){return pl}));var pl=u.nb(t,[],(function(l){return u.xb([u.yb(512,u.j,u.ab,[[8,[o.a,U,E,J.a,R.a,R.b]],[3,u.j],u.w]),u.yb(4608,v.o,v.n,[u.t,[2,v.B]]),u.yb(4608,i.p,i.p,[]),u.yb(4608,V.c,V.c,[]),u.yb(4608,b.b,b.b,[]),u.yb(4608,X.c,X.c,[X.i,X.e,u.j,X.h,X.f,u.q,u.y,v.d,d.b,[2,v.i]]),u.yb(5120,X.j,X.k,[X.c]),u.yb(5120,Q.c,Q.d,[X.c]),u.yb(135680,Q.e,Q.e,[X.c,u.q,[2,v.i],[2,Q.b],Q.c,[3,Q.e],X.e]),u.yb(5120,z.a,z.d,[X.c]),u.yb(5120,H.a,H.b,[X.c]),u.yb(5120,W.g,W.a,[[3,W.g]]),u.yb(4608,q.h,q.n,[v.d,u.A,q.l]),u.yb(4608,q.o,q.o,[q.h,q.m]),u.yb(5120,q.a,(function(l){return[l]}),[q.o]),u.yb(4608,q.k,q.k,[]),u.yb(6144,q.i,null,[q.k]),u.yb(4608,q.g,q.g,[q.i]),u.yb(6144,q.b,null,[q.g]),u.yb(4608,q.f,q.j,[q.b,u.q]),u.yb(4608,q.c,q.c,[q.f]),u.yb(1073742336,v.c,v.c,[]),u.yb(1073742336,Z.m,Z.m,[[2,Z.r],[2,Z.k]]),u.yb(1073742336,Y,Y,[]),u.yb(1073742336,i.o,i.o,[]),u.yb(1073742336,i.e,i.e,[]),u.yb(1073742336,d.a,d.a,[]),u.yb(1073742336,b.j,b.j,[[2,b.c],[2,$.f]]),u.yb(1073742336,s.b,s.b,[]),u.yb(1073742336,b.t,b.t,[]),u.yb(1073742336,g.c,g.c,[]),u.yb(1073742336,p.c,p.c,[]),u.yb(1073742336,V.d,V.d,[]),u.yb(1073742336,c.d,c.d,[]),u.yb(1073742336,h.b,h.b,[]),u.yb(1073742336,y.c,y.c,[]),u.yb(1073742336,ll.b,ll.b,[]),u.yb(1073742336,nl.a,nl.a,[]),u.yb(1073742336,el.c,el.c,[]),u.yb(1073742336,al.g,al.g,[]),u.yb(1073742336,ul.a,ul.a,[]),u.yb(1073742336,tl.c,tl.c,[]),u.yb(1073742336,X.g,X.g,[]),u.yb(1073742336,Q.h,Q.h,[]),u.yb(1073742336,z.c,z.c,[]),u.yb(1073742336,z.b,z.b,[]),u.yb(1073742336,ol.h,ol.h,[]),u.yb(1073742336,b.l,b.l,[]),u.yb(1073742336,b.r,b.r,[]),u.yb(1073742336,il.b,il.b,[]),u.yb(1073742336,rl.c,rl.c,[]),u.yb(1073742336,w.e,w.e,[]),u.yb(1073742336,b.p,b.p,[]),u.yb(1073742336,H.d,H.d,[]),u.yb(1073742336,cl.b,cl.b,[]),u.yb(1073742336,A.a,A.a,[]),u.yb(1073742336,bl.j,bl.j,[]),u.yb(1073742336,dl.e,dl.e,[]),u.yb(1073742336,W.h,W.h,[]),u.yb(1073742336,sl.d,sl.d,[]),u.yb(1073742336,q.e,q.e,[]),u.yb(1073742336,q.d,q.d,[]),u.yb(1073742336,fl.a,fl.a,[]),u.yb(1073742336,t,t,[]),u.yb(1024,Z.i,(function(){return[[{path:"userData",component:C},{path:"userLineNotify",component:x}]]}),[]),u.yb(256,cl.a,{separatorKeyCodes:[hl.f]},[]),u.yb(256,q.l,"XSRF-TOKEN",[]),u.yb(256,q.m,"X-XSRF-TOKEN",[])])}))}}]);